variables:
  GIT_SUBMODULE_STRATEGY: recursive
  GIT_DEPTH: 100
  PKG_VER: 0.0.0  

include:
  - local: /.gitlab/build-astra.yml
    rules:
      - if: $CI_PIPELINE_SOURCE == "trigger"
        when: never
      - when: always
  - local: /.gitlab/build-windows.yml
    rules:
      - if: $CI_PIPELINE_SOURCE == "trigger"
        when: never
      - when: always
  - local: /.gitlab/integration-test-astra.yml
    rules:
      - if: $CI_PIPELINE_SOURCE == "trigger"
        when: never
      - when: always
    needs: 
      stage: 'build'
  - local: /.gitlab/doxygen.yml
    rules:
      - if: $CI_PIPELINE_SOURCE == "trigger"
        when: never
      - when: always
  - local: /.gitlab/install.yml


install:
    needs:
    - stage: build


stages:
  - build
  - integration-test
  - documentation
  - install

